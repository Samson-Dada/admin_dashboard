import{j as e,L as n,r as d,R as m,B as h,C as x,X as f,Y as g,T as p,a as j,b as y,O as L,c as E,d as S,e as w,f as P}from"./vendor-D-FYwv7o.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function i(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(t){if(t.ep)return;t.ep=!0;const s=i(t);fetch(t.href,s)}})();const D=()=>e.jsx("aside",{className:"w-64 h-screen bg-gray-100 p-5",children:e.jsxs("div",{className:"flex flex-col space-y-5",children:[e.jsxs(n,{to:"/products",className:"flex items-center text-gray-400",children:[e.jsx("i",{className:"icon-products mr-2"})," Products"]}),e.jsxs(n,{to:"/users",className:"flex items-center text-gray-400",children:[e.jsx("i",{className:"icon-categories mr-2"})," Users"]}),e.jsxs(n,{to:"/customers",className:"flex items-center text-gray-400",children:[e.jsx("i",{className:"icon-customers mr-2"})," Customers"]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Authentication"}),e.jsxs(n,{to:"/signup",className:"flex items-center text-gray-400 mb-4",children:[e.jsx("i",{className:"icon-signup mr-2"})," Sign Up"]}),e.jsxs(n,{to:"/signin",className:"flex items-center text-gray-400 mb-4",children:[e.jsx("i",{className:"icon-signin mr-2"})," Sign In"]}),e.jsxs(n,{to:"/forgot-password",className:"flex items-center text-gray-600 mb-4",children:[e.jsx("i",{className:"icon-forgot-password mr-2"})," Forgot Password"]}),e.jsxs(n,{to:"/reset-password",className:"flex items-center text-gray-600 mb-4",children:[e.jsx("i",{className:"icon-reset-password mr-2"})," Reset Password"]})]})]})}),O=async()=>{try{const r=await fetch("http://127.0.0.1:8000/api/users");if(!r.ok)throw new Error("Network response was not ok");const a=await r.json();return console.log(a),a}catch(r){console.error("There was a problem with the fetch operation:",r)}},A=async()=>{try{const r=await fetch("http://127.0.0.1:8000/api/products");if(!r.ok)throw new Error("Failed to fetch product data");return await r.json()}catch(r){throw console.error("Error fetching products:",r),r}},R=()=>{const[r,a]=d.useState([]),[i,l]=d.useState([]);return d.useEffect(()=>{(async()=>{try{const s=await O(),c=await A();a([{name:"Users",value:s.length}]),l([{name:"Products",value:c.length}])}catch(s){console.error("Error fetching data:",s)}})()},[]),e.jsxs("div",{className:"p-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Dashboard"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Number of Users"}),e.jsx(m,{width:"100%",height:300,children:e.jsxs(h,{data:r,children:[e.jsx(x,{strokeDasharray:"3 3"}),e.jsx(f,{dataKey:"name"}),e.jsx(g,{}),e.jsx(p,{}),e.jsx(j,{}),e.jsx(y,{dataKey:"value",fill:"#8884d8"})]})})]}),e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Number of Products"}),e.jsx(m,{width:"100%",height:300,children:e.jsxs(h,{data:i,children:[e.jsx(x,{strokeDasharray:"3 3"}),e.jsx(f,{dataKey:"name"}),e.jsx(g,{}),e.jsx(p,{}),e.jsx(j,{}),e.jsx(y,{dataKey:"value",fill:"#82ca9d"})]})})]})]})]})},I={API_BASE_URL:"http://127.0.0.1:8000/api"},U=async r=>{try{const a=await fetch(`${I.API_BASE_URL}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!a.ok)throw new Error("Login failed");return await a.json()}catch(a){throw console.error("Error during login:",a),a}},b=()=>{const[r,a]=d.useState(""),[i,l]=d.useState(""),t=async s=>{s.preventDefault();const c={email:r,password:i};try{const o=await U(c),u=o.data.user.role??"";if(u==="admin"){console.log("Login successful:",o);const N=o.data.token;localStorage.setItem("token",N);const v={id:o.data.user._id,role:o.data.user.role,fullName:o.data.user.fullName,email:o.data.user.email};localStorage.setItem("userInfo",JSON.stringify(v)),console.log("User info stored successfully.")}else u===""&&console.error("error you are not authorized to access this page");n}catch(o){console.error("Login failed:",o)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"bg-white p-8 rounded shadow-md w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Login"}),e.jsxs("form",{onSubmit:t,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"email",className:"block text-gray-700",children:"Email"}),e.jsx("input",{type:"email",id:"email",className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Enter your email",value:r,onChange:s=>a(s.target.value),required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"password",className:"block text-gray-700",children:"Password"}),e.jsx("input",{type:"password",id:"password",className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Enter your password",value:i,onChange:s=>l(s.target.value),required:!0})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 transition duration-200",children:"Login"})]})]})})},k=()=>e.jsxs("div",{className:"flex h-screen",children:[e.jsx(D,{}),e.jsxs("div",{className:"flex-grow bg-gray-50",children:[e.jsx(b,{}),e.jsx(R,{}),e.jsx(L,{})]})]});function C(){return e.jsx(E,{children:e.jsx(S,{children:e.jsx(w,{path:"/",element:e.jsx(k,{}),children:e.jsx(w,{path:"login",element:e.jsx(b,{})})})})})}P(document.getElementById("root")).render(e.jsx(d.StrictMode,{children:e.jsx(C,{})}));
